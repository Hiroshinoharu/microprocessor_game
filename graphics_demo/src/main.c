#include <stm32f031x6.h>
#include <string.h>
#include <sys/wait.h>
#include "display.h"
#include "prbs.h"
#include "sound.h"
#include "musical_notes.h"
#include "serial.h"

 // These are symbolic names representing the counts of different types of bridge blocks.
// BLOCK_COUNT_TOP: Number of top blocks in the bridge
// BLOCK_COUNT_BOTTOM: Number of bottom blocks in the bridge
// BLOCK_COUNT_SIDE: Number of side blocks in the bridge
# define BLOCK_COUNT_TOP 6
# define BLOCK_COUNT_BOTTOM 7
# define BLOCK_COUNT_SIDE 4

//Symbolic Name for themeSong notes
# define NOTE_SIZE 107


// A signature to render the game
void setUpSystem(void);
 
// These functions are part of the basic game structure and handle initialization,
// display setup, system tick, delay, I/O setup, and pin configuration.

void display_begin();
void initClock(void);
void initSysTick(void);
void SysTick_Handler(void);
void delay(volatile uint32_t dly);
void setupIO();
int isInside(uint16_t x1, uint16_t y1, uint16_t w, uint16_t h, uint16_t px, uint16_t py);
void enablePullUp(GPIO_TypeDef *Port, uint32_t BitNumber);
void pinMode(GPIO_TypeDef *Port, uint32_t BitNumber, uint32_t Mode);

//Signature to render the game's textures
void renderGame(void);

// These functions are responsible for rendering different aspects of the game,
// such as textures, assets, and specific levels.
void renderAssets(void);
void renderLevel2(void);
void renderLevel3(void);
void renderLevel4(void);

//This function allows the user to reset the curerent level they are at
void restart(void);

// These functions handle various game-related actions and conditions, such as game over, completing levels,
// checking player positions relative to enemies and objects, and generating additional game levels.

// These functions are used to check whether certain movement buttons (left, right, up, down) are pressed.

int leftPressed(void);
int rightPressed(void);
int upPressed(void);
int downPressed(void);

//Signature for the Game Over screen
void gameOver(void);

//Displays a black screen
void displayBlack(void);

//Signature to display the level completed
void displayLevelCompleted(void);
void displayLevel2Completed(void);
void displayLevel3Completed(void);

//Signature for the Level Completed Screen
void levelCompleted(void);
void level2Completed(void);
void level3Completed(void);

//Signature to display if the player finishes the game
void gameCompleted(void);

//Siganture to check if the player inside the enemy.
void playerInsideEnemy(uint16_t,uint16_t,uint16_t,uint16_t);

//Signature to check if the player is inside the meat
int playerInsideMeat(uint16_t,uint16_t,uint16_t,uint16_t);

//Signature to check if enemy hit player
void enemyInsidePlayer(uint16_t,uint16_t,uint16_t,uint16_t);

//Signature to check if the player hits the ocean
int hitOcean(uint16_t,uint16_t,uint16_t,uint16_t);

//Signature to generate a first, second, third and fourth level
void level1(void);
void level2(void);
void level3(void);
void level4(void);

//Signature to play music throughout the game
void playIntroNotes(void);
void playThemeSong(int [],int);
void gameOverSound(void);
void levelCompleteSound(void);
void gameCompletedSound(void);

// A volatile variable to store the elapsed time in milliseconds
volatile uint32_t milliseconds;

//Barriers are set to the top-left corner
const uint16_t barrierX[BLOCK_COUNT_TOP] = {30,30,30,30,30,30};
const uint16_t barrierY[BLOCK_COUNT_TOP] = {0,10,20,30,40,50};

//Barriers are set to the top-right corner
const uint16_t barrier2X[BLOCK_COUNT_TOP] = {80,80,80,80,80,80};
const uint16_t barrier2Y[BLOCK_COUNT_TOP] = {0,10,20,30,40,50};

//Barriers are set to the bottom-left of the corner
const uint16_t barrier3X[BLOCK_COUNT_BOTTOM] = {30,30,30,30,30,30,30};
const uint16_t barrier3Y[BLOCK_COUNT_BOTTOM] = {145,135,125,115,105,95,85};

//Barriers are set to the bottom-right of the corner
const uint16_t barrier4X[BLOCK_COUNT_BOTTOM] = {80,80,80,80,80,80,80};
const uint16_t barrier4Y[BLOCK_COUNT_BOTTOM] = {145,135,125,115,105,95,85};

//Barrier set with the side bridge
const uint16_t side_barrierX[BLOCK_COUNT_SIDE] = {0,10,20,30};
const uint16_t side_barrierY[BLOCK_COUNT_SIDE] = {85,85,85,85};

//Barriers are set to the top-right corner
const uint16_t side_barrier2X[BLOCK_COUNT_SIDE] = {0,10,20,30};
const uint16_t side_barrier2Y[BLOCK_COUNT_SIDE] = {49,49,49,49};

//Barriers are set to the bottom-left of the corner
const uint16_t side_barrier3X[BLOCK_COUNT_SIDE] = {80,90,100,110};
const uint16_t side_barrier3Y[BLOCK_COUNT_SIDE] = {85,85,85,85};

//Barriers are set to the bottom-right of the corner
const uint16_t side_barrier4X[BLOCK_COUNT_SIDE] = {80,90,100,110};
const uint16_t side_barrier4Y[BLOCK_COUNT_SIDE] = {49,49,49,49};

//All assests are generated including our main character luffy, the enemy, the meat object and all the symbols used around the game and assets delete
const uint16_t luffy1[]=
{
27649,27649,27649,16142,16142,16142,16142,16142,16142,27649,27649,27649,27649,27649,27649,40224,40224,40224,40224,40224,40224,27649,27649,27649,27649,27649,16142,16142,16142,16142,16142,16142,16142,16142,27649,27649,27649,27649,27649,51505,51505,51505,51505,51505,51505,27649,27649,27649,27649,27649,27649,65535,0,40375,40375,0,65535,27649,27649,27649,27649,27649,27649,40375,40375,40375,40375,40375,40375,27649,27649,27649,27649,40375,40375,40224,40224,40375,40375,40224,40224,40375,40375,27649,27649,40375,40375,40224,40224,40375,40375,40224,40224,40375,40375,27649,27649,40375,40375,40224,40224,40375,40375,40224,40224,40375,40375,27649,27649,40375,40375,40224,40224,40375,40375,40224,40224,40375,40375,27649,27649,40375,40375,40224,40224,40375,40375,40224,40224,40375,40375,27649,27649,27649,27649,16621,16621,16621,16621,16621,16621,27649,27649,27649,27649,27649,27649,16621,16621,16621,16621,16621,16621,27649,27649,27649,27649,27649,27649,65535,65535,27649,27649,65535,65535,27649,27649,27649,27649,27649,27649,40375,40375,27649,27649,40375,40375,27649,27649,27649,27649,27649,27649,22355,22355,27649,27649,22355,22355,27649,27649,27649,
};

const uint16_t luffy2[] =
{
27649,27649,27649,16142,16142,16142,16142,16142,16142,27649,27649,27649,27649,27649,27649,40224,40224,40224,40224,40224,40224,27649,27649,27649,27649,27649,16142,16142,16142,16142,16142,16142,16142,16142,27649,27649,27649,27649,27649,51505,51505,51505,51505,51505,51505,27649,27649,27649,27649,27649,27649,51505,51505,51505,51505,51505,51505,27649,27649,27649,27649,27649,27649,51505,51505,51505,51505,51505,51505,27649,27649,27649,27649,40375,40375,40224,40224,40224,40224,40224,40224,40375,40375,27649,27649,40375,40375,40224,40224,40224,40224,40224,40224,40375,40375,27649,27649,40375,40375,40224,40224,40224,40224,40224,40224,40375,40375,27649,27649,40375,40375,40224,40224,40224,40224,40224,40224,40375,40375,27649,27649,40375,40375,40224,40224,40224,40224,40224,40224,40375,40375,27649,27649,27649,27649,16621,16621,16621,16621,16621,16621,27649,27649,27649,27649,27649,27649,16621,16621,16621,16621,16621,16621,27649,27649,27649,27649,27649,27649,65535,65535,27649,27649,65535,65535,27649,27649,27649,27649,27649,27649,40375,40375,27649,27649,40375,40375,27649,27649,27649,27649,27649,27649,22355,22355,27649,27649,22355,22355,27649,27649,27649,
};

const uint16_t luffy3[] =
{
27649,27649,27649,16142,16142,16142,16142,27649,27649,27649,27649,27649,27649,27649,27649,40224,40224,40224,40224,27649,27649,27649,27649,27649,27649,27649,16142,16142,16142,16142,16142,16142,27649,27649,27649,27649,27649,27649,27649,51505,51505,51505,51505,65535,27649,27649,27649,27649,27649,27649,27649,51505,51505,51505,51505,40375,40375,27649,27649,27649,27649,27649,27649,51505,51505,51505,51505,40375,27649,27649,27649,27649,27649,27649,27649,40224,40224,40224,40224,27649,27649,27649,27649,27649,27649,27649,27649,40224,40375,40375,40224,27649,27649,27649,27649,27649,27649,27649,27649,40224,40375,40375,40224,27649,27649,27649,27649,27649,27649,27649,27649,40224,40375,40375,40224,27649,27649,27649,27649,27649,27649,27649,27649,40224,40375,40375,40224,27649,27649,27649,27649,27649,27649,27649,27649,16621,16621,16621,16621,27649,27649,27649,27649,27649,27649,27649,27649,16621,16621,16621,16621,27649,27649,27649,27649,27649,27649,27649,27649,65535,27649,27649,65535,27649,27649,27649,27649,27649,27649,27649,40375,40375,27649,27649,40375,40375,27649,27649,27649,27649,27649,27649,22355,22355,27649,27649,22355,22355,27649,27649,27649,27649,
};

const uint16_t luffy4[] =
{
27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,40375,40375,27649,27649,27649,27649,27649,27649,27649,27649,27649,16142,16142,16142,16142,27649,27649,27649,27649,27649,27649,27649,16142,40224,40224,40224,40224,16142,27649,27649,27649,27649,40375,40375,16142,40224,16142,16142,40224,16142,40375,40375,27649,27649,40375,40375,16142,40224,16142,16142,40224,16142,40375,40375,27649,27649,27649,27649,16142,40224,40224,40224,40224,16142,27649,27649,27649,27649,27649,27649,27649,16142,16142,16142,16142,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,
};

const uint16_t meat[] =
{
27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,65535,65535,65535,65535,27649,27649,27649,27649,27649,27649,27649,27649,27649,65535,65535,27649,27649,27649,27649,27649,27649,27649,27649,27649,22355,22355,22355,22355,27649,27649,27649,27649,27649,27649,27649,27649,22355,22355,22355,22355,27649,27649,27649,27649,27649,27649,27649,27649,22355,22355,22355,22355,27649,27649,27649,27649,27649,27649,27649,27649,22355,22355,22355,22355,27649,27649,27649,27649,27649,27649,27649,27649,22355,22355,22355,22355,27649,27649,27649,27649,27649,27649,27649,27649,27649,65535,65535,27649,27649,27649,27649,27649,27649,27649,27649,27649,65535,65535,65535,65535,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,
};

const uint16_t enemy[] =
{
27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,1994,1994,1994,1994,27649,27649,27649,27649,27649,27649,27649,1994,1994,1994,1994,1994,1994,27649,27649,27649,27649,27649,27649,1994,1994,1994,1994,1994,1994,27649,27649,27649,27649,27649,27649,65535,0,40375,40375,0,65535,27649,27649,27649,61307,27649,27649,40375,40375,40375,40375,40375,40375,27649,27649,61307,61307,27649,27649,22355,22355,22355,22355,22355,22355,27649,27649,61307,61307,27649,27649,22355,22355,22355,22355,22355,22355,27649,27649,61307,61307,27649,13294,13294,13294,13294,13294,13294,13294,13294,27649,27649,61307,27649,65535,13294,65535,65535,65535,65535,13294,65535,27649,24327,24327,27649,13294,13294,13294,13294,13294,13294,13294,13294,27649,27649,61307,40375,65535,13294,65535,65535,65535,65535,13294,65535,27649,27649,27649,27649,27649,4368,4368,4368,4368,4368,4368,40375,27649,27649,27649,27649,27649,61307,61307,61307,61307,61307,4368,27649,27649,27649,27649,27649,27649,61307,61307,27649,27649,61307,61307,27649,27649,27649,27649,27649,27649,61307,61307,27649,27649,61307,61307,27649,27649,
};

const uint16_t delete[] =
{
27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,27649,
};

const uint16_t barrier[] =
{
59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,
};

const uint16_t skull[] =
{
	0,0,8192,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,16384,0,0,0,32,16490,16473,49241,8192,0,0,0,0,0,0,0,16424,41000,32808,32808,41000,16424,0,0,0,0,0,0,0,8192,32857,16473,16490,32,0,0,24665,10891,21404,50042,24616,0,0,0,0,0,16433,24706,41074,8273,8281,8281,8273,32882,24706,24625,0,0,0,0,0,16424,41850,13212,19083,32857,0,24641,73,62876,24575,9306,32825,0,0,0,40976,49241,57466,50002,4892,30476,55052,55052,30476,13340,50002,57466,49241,49168,0,0,0,32817,1114,16375,21917,73,24641,50770,37012,49151,28548,49290,49,0,0,49200,49266,34362,37403,48149,57126,65318,48934,48934,65318,57126,48149,45595,34362,57458,49200,0,0,57384,49290,20356,49151,61588,50770,65535,48086,31702,16383,19579,122,57376,32,139,4140,24342,32551,65319,7975,57126,65318,65318,57126,7975,7975,32551,24342,12588,8331,8224,49184,122,11387,8183,39894,39894,65535,28539,18307,18043,48078,16375,11395,41082,24706,57368,52482,36115,52490,44042,44042,44298,44298,44298,44298,44042,44042,52490,36115,60674,57368,16514,41090,11395,8183,48342,26235,18051,28539,0,49184,16449,34402,15591,32759,52628,41240,4864,5648,5128,5128,5128,5128,5128,5128,5128,5128,5128,5128,5128,5128,5648,4864,33048,36236,24567,23783,18035,24665,49184,0,0,41008,41033,24689,25665,39118,27763,2304,5896,5904,5904,5904,5904,5904,5904,5904,5904,5904,5904,5904,5904,5904,5904,5896,2304,11379,39126,42057,138,16465,49200,0,8224,50522,19995,52498,44034,19722,27914,36106,36106,35850,36106,36106,36106,36106,36106,36106,36106,36106,36106,36106,36106,36106,35850,36106,36106,27914,19722,44034,44306,60955,34147,16465,49192,58962,45075,4115,20507,28435,53003,19979,11787,11787,28171,3595,3595,19979,11787,11787,11787,11787,19979,3595,3595,36363,11787,11787,19979,53003,61195,61459,61459,61459,18019,41066,24576,32841,16440,32816,16440,56,34898,21949,46261,54453,13493,12964,37804,30141,46261,46261,46261,46261,30141,37804,12964,13493,54453,46261,21949,18506,41049,16498,16489,49265,24665,40960,0,0,0,0,0,16416,61315,65535,65535,65535,62629,50737,26425,39374,65535,65535,65535,65535,47566,34617,50737,46245,65535,65535,65535,53123,57441,57360,32768,40960,0,0,0,0,0,0,0,49176,61051,65535,24575,21140,32768,0,0,792,54965,65535,65535,6077,792,0,0,24576,4756,24575,65535,61051,16473,8200,0,0,0,0,0,0,0,0,0,49192,36475,65535,15855,49416,0,0,0,0,1849,65535,65535,18233,0,0,0,0,33032,64743,65535,20347,98,16392,0,0,0,0,0,0,0,0,0,32833,17506,31166,7935,49944,0,0,0,0,10570,65535,65535,26954,0,0,0,0,33560,57079,22974,50290,16473,16384,0,0,0,0,0,0,0,0,0,49160,49225,20620,65527,38845,57872,0,0,9777,48094,65535,65535,64478,26161,0,0,49680,22461,65527,53388,16498,24600,0,0,0,0,0,0,0,0,0,0,0,24649,16730,47806,65535,22461,26954,27218,48094,65535,46509,38317,65535,64478,27218,18762,6077,65535,64198,16730,49225,0,0,0,0,0,0,0,0,0,0,0,0,57352,8298,44419,57335,65535,65535,65535,65271,19290,0,0,2906,57079,65535,65535,65535,57335,52611,16490,57352,0,0,0,0,0,0,0,0,0,0,0,0,0,24625,49298,36227,40679,65535,65535,65271,3963,49152,49152,44659,57079,65535,65535,40687,44419,49298,32817,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,49,57458,50249,20347,47830,65535,65535,15591,15591,65535,65535,47830,36731,42057,57458,8241,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,57442,32866,1577,1849,4228,13741,46773,46773,13741,12420,1849,9777,24674,57442,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24674,8306,0,18762,42545,2642,3699,42545,34353,3699,10834,34353,26954,0,90,65,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,90,16498,8192,0,10834,2378,55494,65535,45188,28804,65535,14798,2378,19026,0,8192,8306,8282,0,0,0,0,0,0,0,0,0,0,0,0,0,49241,8835,45708,10834,12420,45188,43866,9777,35410,58401,50209,35410,17969,27482,45188,4228,10834,37516,9091,57441,0,0,0,0,0,0,0,0,49176,40984,49160,81,49770,38837,8183,10289,6862,21669,8720,22461,24311,44923,36731,24311,38845,8720,62364,15062,10289,57335,47029,57962,81,40968,8216,8224,0,0,0,40976,57466,19323,52355,17274,5805,65535,62637,16457,60258,65535,5285,3963,45452,2114,2114,45452,3963,62364,65535,11363,8265,45997,65535,22197,17274,44155,60291,24706,40976,0,0,16416,57433,39085,16375,63933,65535,54172,362,41090,25450,22445,65535,38053,45188,29332,29332,45188,29861,65535,38837,25450,41090,362,37532,65535,6590,8183,55469,57433,24616,0,0,8,122,50298,19051,65271,54957,24954,49241,16384,49249,44411,31958,65535,65535,65535,65535,65535,65535,40406,60795,57441,16384,41049,24954,38573,8183,27499,50298,8314,8,0,0,0,49160,57,8281,52331,65535,60275,16441,0,32825,8587,17250,13212,6854,65535,65535,15046,29596,17250,8587,41025,0,16441,35699,65535,11371,8281,57,49160,0,0,0,0,0,0,32849,34187,21396,26507,73,0,0,8241,8314,8298,25970,45716,45972,42354,8298,16506,16433,0,0,57417,18315,21396,42379,41041,0,0,0,0,0,0,0,0,24584,41066,16473,41058,40976,0,0,0,0,41000,57450,32849,24657,57450,49192,0,0,0,0,32784,41058,16473,41074,32784,0,0,0,0,0,0,0,0,0,0,8200,0,0,0,0,0,0,0,0,8,8,0,0,0,0,0,0,0,0,8200,0,0,0,0,0,0,
};

const uint16_t logo[] =
{
	0,0,2642,11891,59722,528,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1057,44659,51530,0,0,0,0,58665,23518,65535,14005,17969,0,0,0,0,49408,25344,34353,8472,25120,25120,25120,8472,34353,25344,49408,0,0,0,0,0,37788,65535,31710,58665,0,0,43338,56286,65535,32767,38581,10834,0,0,41216,58913,59490,25739,58052,8421,49636,49636,49636,8421,716,25739,59490,9497,0,0,0,49152,62100,49151,65535,7399,11098,0,44395,65535,65535,65535,31446,28275,33032,41736,26978,9388,229,41213,57597,57597,57597,57597,57597,57597,57597,41213,16621,9123,16945,16648,41224,60515,47566,65535,65535,65535,28804,0,41488,44923,28539,38317,65535,39902,52050,50290,25044,33021,57597,16637,41131,8827,33411,33411,33411,8827,41131,8437,49405,41213,24821,17035,60242,39902,65535,54437,43866,36996,792,0,0,0,0,8720,54437,65535,15046,1171,33021,253,57515,35395,38660,48133,15365,15365,15365,48133,46852,43587,32939,16629,8445,25755,15046,65535,62629,8720,0,0,0,0,0,0,0,0,49936,46501,65535,56270,42411,49819,13828,65285,40710,7942,7942,7942,7942,7942,40710,7942,63236,51523,33923,56278,65535,13741,58128,0,0,0,0,0,0,0,0,16640,59234,25259,37276,16383,12932,38404,57094,65286,57094,57094,57094,57094,57094,57094,57094,65294,40710,32261,37163,31974,5053,41651,34402,16640,0,0,0,0,0,0,0,58392,33964,24829,16579,36459,6669,32518,24334,23814,47621,64005,64005,64005,64005,64005,47621,15622,16142,40710,6917,11611,57796,33014,41884,42008,0,0,0,0,0,0,24576,58681,33229,254,24780,61186,38147,45827,29443,37377,61696,29184,29184,29184,29184,29184,61696,20993,29443,37635,29955,28675,24740,24814,49365,42586,8192,0,0,0,0,0,0,25723,57581,41189,33394,3584,19968,3584,19968,4608,29696,21504,21504,21504,21504,21504,29696,12800,28416,60928,19968,44544,16953,8397,8413,58259,25096,0,0,0,0,57616,18225,42314,34395,20506,53506,29442,54531,38403,45314,52234,3074,52226,60418,60418,60418,60418,3074,52234,37122,22276,62979,37890,45314,36890,3115,42091,50745,57616,0,0,40968,52530,22804,15364,7684,48900,30219,12892,52562,27978,3427,2130,34625,34625,58937,1593,50745,18241,1593,9529,42801,59425,1825,18970,45314,23556,48900,64772,55316,52530,57352,0,49160,28210,30996,48388,57093,55043,28564,31198,47574,19819,9513,49416,49944,18498,43858,18762,2642,59449,25368,8456,16912,9521,2378,1866,57904,21763,7941,48388,30996,28210,8200,0,0,41496,26161,17770,52778,19209,29604,15326,12155,16384,0,0,0,8456,2906,44387,26425,40960,0,0,0,8192,34089,59978,34361,27401,3883,9578,9777,41496,0,0,0,0,25120,8421,33004,16538,38309,7655,10041,0,0,0,0,0,1849,12420,26161,0,0,0,0,0,41752,52314,43057,32906,41196,25060,280,0,0,0,0,0,25633,33700,24830,16612,19851,65535,2642,0,0,0,0,0,2378,54164,42809,0,0,0,0,0,1057,21396,19034,57548,41213,25044,58409,0,0,0,0,0,16640,25963,41189,33013,9883,56807,52323,0,0,0,0,0,44395,14798,18762,0,0,0,0,0,10834,7911,35467,41189,33021,17291,784,0,0,0,0,0,24576,17721,16837,8446,16588,45460,31967,1858,0,0,24576,51794,64206,6606,38581,34882,57344,0,0,26425,40431,47541,412,8438,57573,42330,8448,0,0,0,0,0,0,50200,25500,16622,24821,50603,23518,32767,54437,20083,54965,65535,61836,57608,4236,8191,30653,28275,54172,8191,22990,1420,205,8422,9124,58392,0,0,0,0,0,0,0,16640,18522,33237,57598,8396,19315,64470,65535,65535,65535,65535,20612,57344,53115,65535,65535,65535,65535,64206,52339,32940,57582,25037,10074,16640,0,0,0,0,0,0,0,0,16904,9298,24996,2419,29844,36723,37532,56551,65535,65535,24575,56551,8191,65535,65535,7663,45724,45972,16367,37012,32940,58491,16896,0,0,0,0,0,0,0,0,0,24576,11363,3955,38309,37516,58507,16555,43346,62620,31710,31710,15591,39902,39902,29861,59730,24747,51363,64470,65535,53908,10842,32768,0,0,0,0,0,0,0,0,57344,35939,22461,55750,45708,25971,24821,419,27474,28539,35146,28539,52851,4228,43338,19290,43594,8859,33020,51091,64734,65535,14534,60515,49152,0,0,0,0,0,0,32768,3435,21669,5813,55758,10834,25913,26028,41041,61027,44395,36731,5020,12948,37524,4228,60515,52835,24657,25532,10355,44651,23783,65535,6342,52323,24576,0,0,0,33296,44659,61307,46245,15591,12948,50209,32768,0,17969,10314,44659,51794,15062,40167,40167,40167,39638,19290,28275,18506,9505,24832,24576,11627,7399,65535,22461,44923,28539,49680,0,28011,65535,65535,40695,39110,58929,0,0,0,0,11363,62629,36996,61043,37260,29068,37260,61043,45452,30653,60242,0,0,0,49152,35939,23254,40959,65535,65535,12420,0,26954,40167,65535,65535,19819,57344,0,0,0,0,25633,62100,39638,15591,38581,30389,38581,56286,64478,28804,10306,0,0,0,0,25368,45980,40959,65535,23783,59986,0,0,58665,56286,65535,28539,0,0,0,0,0,0,41752,11627,4756,31182,65535,47566,12948,28011,264,0,0,0,0,0,9249,5813,65535,64478,8984,0,0,0,0,51530,44395,41224,0,0,0,0,0,0,0,0,0,32768,33560,32768,0,0,0,0,0,0,0,0,49152,1057,11891,35146,0,0,0,
};

const uint16_t waves[] =
{
59132,59132,59132,59132,59132,59132,59132,59132,59132,65535,65535,59132,65535,59132,59132,65535,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,59132,
};

const uint16_t ship[] =
{
16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,51233,65535,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,51233,65535,65535,16621,16621,16621,16621,16621,16621,16621,16621,16621,51233,65535,65535,65535,16621,16621,16621,16621,16621,16621,16621,16621,51233,65535,65535,65535,65535,16621,16621,16621,16621,16621,16621,16621,51233,65535,65535,65535,16621,16621,16621,16621,16621,16621,16621,16621,51233,65535,65535,16621,16621,16621,16621,16621,16621,16621,16621,16621,51233,65535,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,51233,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,51233,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,51233,16621,16621,16621,16621,16621,12090,12090,12090,12090,12090,12090,12090,12090,12090,12090,12090,12090,16621,12090,12090,12090,12090,12090,12090,12090,12090,12090,12090,16621,16621,16621,12090,12090,12090,12090,12090,12090,12090,12090,16621,16621,16621,16621,16621,12090,12090,12090,12090,12090,12090,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,
};

const uint16_t fish[] =
{
16621,16621,16621,16613,16621,16621,16621,16613,24813,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16613,16613,24813,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,65315,16621,16613,16621,65315,65315,65315,65315,65315,65315,16621,16621,65315,65315,16621,65315,65315,65315,65315,65315,65315,65315,65315,16621,65315,65315,65315,65315,65315,65315,65315,65315,65535,0,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,16621,65315,65315,65315,65315,65315,65315,65315,65315,16621,65315,16621,16621,16621,65315,65315,65315,65315,65315,65315,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,16621,
};

//Global Variables for our waves background
uint16_t waveX = 0;
uint16_t wavesY = 0;

//Global Variable for the fishes and boats
uint16_t shipX;
uint16_t shipY;

uint16_t fishX;
uint16_t fishY;

//Global Variables for the game
//Variables declared for our main character Luffy
int hinverted = 0;
int vinverted = 0;
int toggle = 0;
int hmoved = 0;
int vmoved = 0;

uint16_t x = 55;
uint16_t y = 140;

//Variables for the enemies co-ordinates
uint16_t enemyX = 55;
uint16_t enemyY = 65;

uint16_t enemy2X = 55;
uint16_t enemy2Y = 100;

uint16_t enemy3X = 55;
uint16_t enemy3Y = 85;

//Gloabl variables for enemy movement
int deltaX = 1;
int delta2X = -1;
int delta3X = 1;


//Variables for the meat co-ordinates
uint16_t meatX = 55;
uint16_t meatY = 20;

//Global Varibales for the notes
uint16_t introNotes[] = {E4, D4, C4, E4, D4, C4, G3, E3, G3, D4};
int themeSong[NOTE_SIZE] = {E5, DS4_Eb4, E5, DS4_Eb4, E5, B2, D3, CS2_Db2, B1, A2 , B7, GS1_Ab1, E5, 
                        DS4_Eb4, E5, DS4_Eb4, E5, B2, D3, CS2_Db2, B4, A2 , B7, GS1_Ab1, CS1_Db1, 
                        B2, A7, B1, CS2_Db2, DS3_Eb3, E4, FS5_Gb5, GS6_Ab6, FS5_Gb5, E4, DS3_Eb3, E5, DS4_Eb4, E5, 
                        DS4_Eb4, E5, DS2_Eb2, E3, DS2_Eb2, CS1_Db1, B2, A7 ,B1, GS1_Ab1, 
                        CS2_Db2, B7, A1, B2, CS3_Db3, DS4_Eb4, E5, FS6_Gb6, GS5_Ab5, FS4_Gb4, E3, 
                        DS5_Eb5, E4, FS6_Gb6, GS4_Ab4, A5, B2, A3, GS2_Ab2, FS1_Gb1, GS7_Ab7, A1, B1, A2, 
                        GS7_Ab7, FS1_Gb1, GS2_Ab2, A3, B4, A5, GS6_Ab6, FS5_Gb5, GS4_Ab4, A3, B5, A4, E5, 
                        DS4_Eb4, E5, B4, D5, CS2_Db2, B3, A2, B1, GS2_Ab2, CS7_Db7, B1, A1, 
                        B2, CS7_Db7, DS1_Eb1, E2, FS3_Gb3, GS4_Ab4, FS5_Gb5, E6, DS5_Eb5};

int noSong[] = {0};

int musicFlag =  0;


int main()
{
   setUpSystem(); //Calls the sytem setup to render the game
   
   //Local Variables for logs for any user interaction with the game
   char log[] = "Game has been booted";

   for (int i = 0; i < strlen(log); i++)
   {
	 eputchar(log[i]);
	 delay(50);
   }

   eputs("\r\n");
   
   displayBlack(); //Potrays a black screen for our main menu

   //A Title screen is displayed until the user starts the game (left button pressed)
   while (leftPressed() != 0)
   {
	  playIntroNotes();	

	  //Displays the Title screen with a logo
      printText("Crossy Seas",25,10,255,0);
      putImage(45,45,32,30,logo,0,0);
      printText("By Max & Jennifier",0,110,255,0);

      printText("Ready to set sea", 0, 130, 255, 0);
      printText("Left Button", 0, 140, 255, 0);
      printText("To begin!", 0, 150, 255, 0);
   }

   //Render Level 1 loading...
   displayBlack();

   printText("Crossy Seas",25,10,255,0);
   putImage(45,45,32,30,logo,0,0);
   printText("Level 1",0,130,255,0);
   printText("Loading....",0,140,255,0);

   delay(1000);

   level1();

   return 0;
} //end main

// Function to set up the system, including clock, SysTick, I/O, and timer
void setUpSystem()
{
	initClock(); // Initialize the clock settings
	initSysTick(); // Initialize the SysTick timer
	setupIO(); // Set up input/output configurations
	initTimer(); // Set up a Timer
	initSerial(); //Sets up a serial system

	//Local Variables for logs for any user interaction with the game
    char log[] = "System has been intialised";

    for (int i = 0; i < strlen(log); i++)
    {
	  eputchar(log[i]);
	  delay(50);
    }

    eputs("\r\n");
}

// Function to initialize the SysTick timer
void initSysTick(void)
{
	SysTick->LOAD = 48000; // Set the reload value for a 1ms time interval (assuming a 48MHz clock)
	SysTick->CTRL = 7; // Enable SysTick with the system clock and interrupts
	SysTick->VAL = 10; // Set an initial value to start counting
	__asm(" cpsie i "); // enable interrupts globally
}

// SysTick interrupt handler function
void SysTick_Handler(void)
{
	milliseconds++; // Increment a variable to track milliseconds
}

// Intiaalise clock function
void initClock(void)
{
	// This is potentially a dangerous function as it could
	// result in a system with an invalid clock signal - result: a stuck system

	// Set the PLL up
	// First ensure PLL is disabled
	RCC->CR &= ~(1u<<24);
	while( (RCC->CR & (1 <<25))); // wait for PLL ready to be cleared
	
	// Warning here: if system clock is greater than 24MHz then wait-state(s) need to be
	// inserted into Flash memory interface
			
	FLASH->ACR |= (1 << 0);
	FLASH->ACR &=~((1u << 2) | (1u<<1));
	// Turn on FLASH prefetch buffer
	FLASH->ACR |= (1 << 4);
	// set PLL multiplier to 12 (yielding 48MHz)
	RCC->CFGR &= ~((1u<<21) | (1u<<20) | (1u<<19) | (1u<<18));
	RCC->CFGR |= ((1<<21) | (1<<19) ); 

	// Need to limit ADC clock to below 14MHz so will change ADC prescaler to 4
	RCC->CFGR |= (1<<14);

	// and turn the PLL back on again
	RCC->CR |= (1<<24);        
	// set PLL as system clock source 
	RCC->CFGR |= (1<<1);
}

void delay(volatile uint32_t dly)
{
	uint32_t end_time = dly + milliseconds; // adds the delays and the milliseconds together
	while(milliseconds != end_time)
		__asm(" wfi "); // sleep
}

void enablePullUp(GPIO_TypeDef *Port, uint32_t BitNumber)
{
	Port->PUPDR = Port->PUPDR &~(3u << BitNumber*2); // clear pull-up resistor bits
	Port->PUPDR = Port->PUPDR | (1u << BitNumber*2); // set pull-up bit
}

void pinMode(GPIO_TypeDef *Port, uint32_t BitNumber, uint32_t Mode)
{
	/*
	*/
	uint32_t mode_value = Port->MODER;
	Mode = Mode << (2 * BitNumber);
	mode_value = mode_value & ~(3u << (BitNumber * 2));
	mode_value = mode_value | Mode;
	Port->MODER = mode_value;
}

int isInside(uint16_t x1, uint16_t y1, uint16_t w, uint16_t h, uint16_t px, uint16_t py)
{
	// checks to see if point px,py is within the rectange defined by x,y,w,h
	uint16_t x2,y2;
	x2 = x1+w;
	y2 = y1+h;
	int rvalue = 0;
	if ( (px >= x1) && (px <= x2))
	{
		// ok, x constraint met
		if ( (py >= y1) && (py <= y2))
			rvalue = 1;
	}
	return rvalue;
}

// Sets up input/output devices
void setupIO()
{
	RCC->AHBENR |= (1 << 18) + (1 << 17); // enable Ports A and B
	display_begin(); // Turns on the display

	//Enables breadboard
	pinMode(GPIOB,4,0);
	pinMode(GPIOB,5,0);
	pinMode(GPIOA,8,0);
	pinMode(GPIOA,11,0);
	enablePullUp(GPIOB,4);
	enablePullUp(GPIOB,5);
	enablePullUp(GPIOA,11);
	enablePullUp(GPIOA,8);
}

//Function to dectect left button presses
int leftPressed()
{
	if ((GPIOB->IDR & (1 << 5))==0)// left pressed
	{
		//Returns 0 if the left button is pressed
		return 0;
	}
	else
	{
		//Else returns 1 
		return 1;
	}

}

//Function to dectect right button presses
int rightPressed()
{
	if ((GPIOB->IDR & (1 << 4))==0)// right pressed
	{
		//Returns 0 if the left button is pressed
		return 0;
	}
	else
	{
		//Else returns 1 (false)
		return 1;
	}
}

//Function to dectect down button pressed button
int downPressed()
{
	if ((GPIOA->IDR & (1 << 11)) == 0)// down pressed
	{
		//Returns 0 if the left button is pressed
		return 0;
	}
	else
	{
		//Else returns 1 (false)
		return 1;
	}	
}

//Function to dectect up button pressed button
int upPressed()
{
	if ((GPIOA->IDR & (1 << 8)) == 0)// up pressed
	{
		//Returns 0 if the left button is pressed
		return 0;
	}
	else
	{
		//Else returns 1 (false)
		return 1;
	}		
}

// Function that displays a game over screen whenever the player loses the game
void gameOver()
{
	playThemeSong(noSong,0);
	musicFlag = 1;
	//Local Variables for logs for any user interaction with the game
    char log[] = "Player has died";

    for (int i = 0; i < strlen(log); i++)
    {
	  eputchar(log[i]);
	  delay(50);
    }

    eputs("\r\n");
	
	displayBlack(); // Displays a black screen
	gameOverSound(); //Plays a sound when the game is over

	while (upPressed() != 0)
	{
		printTextX2(" Game Over ",0,0,255,0); // Displays text to the user
		putImage(45,45,32,33,skull,0,0); //Displays a skull 
		printText("Darkness Consumes:",0,130,255,0); // Displays "Darkness Consumes:" at coordinates (0,130)
		printText("Your Journey Ends",0,140,255,0); // Displays "Your Journey Ends" at coordinates (0,140)
		printText("Press up to retry",0,150,255,0); // Displays the text "Press up to retry" at coordinates (0, 150) 
	}

	// Delay for a short period to ensure smooth transition
	delay(50);

	restart(); //Calls a function that restarts the game
}

void restart(void)
{

	//Local Variables for logs for any user interaction with the game
   char log[] = "Game has restarted";

   for (int i = 0; i < strlen(log); i++)
   {
	 eputchar(log[i]);
	 delay(50);
   }

   eputs("\r\n");
	
	//Variable to continue
    int restart_game = 0;

	while (restart_game == 0)
	{
		fillRectangle(0,0,128,160,0);
		fillRectangle(40,0,45,179,0);
		fillRectangle(0,65,128,20,0);

		if (upPressed() == 0) // up pressed
		{   
			restart_game = 1;   

			while (1)
			{
				printText("Crossy Seas",25,10,255,0);
				putImage(45,45,32,30,logo,0,0);

				delay(1000);

				printText("Level 1",0,130,255,0);
				printText("Loading....",0,150,255,0);

				delay(1000);
				level1();
				delay(1000);
			}
		}
	}
}

void gameOverSound(void)
{
	playNote(A3);
	delay(150);
	playNote(0);
	playNote(B3);
	delay(150);
	playNote(0);
}

// Function to check if an enemy is inside the player's area
void enemyInsidePlayer(uint16_t enemyX,uint16_t enemyY,uint16_t x ,uint16_t y)
{
	// Now check for an overlap by checking to see if ANY of the 4 corners of Luffy are within the enemy area
	if (isInside(x,y,12,16,enemyX,enemyY) || isInside(x,y,12,16,enemyX+12,enemyY) || isInside(x,y,12,16,enemyX,enemyY+16) || isInside(x,y,12,16,enemyX+12,enemyY+16) )
	{
		gameOver(); // Call the game over function when there's an overlap
	}
}
// Function to check if the player is inside the enemies's area
void playerInsideEnemy(uint16_t x,uint16_t y,uint16_t enemyX ,uint16_t enemyY)
{
	// Now check for an overlap by checking to see if ANY of the 4 corners of Luffy are within the enemy area
	if (isInside(enemyX,enemyY,12,16,x,y) || isInside(enemyX,enemyY,12,16,x+12,y) || isInside(enemyX,enemyY,12,16,x,y+16) || isInside(enemyX,enemyY,12,16,x+12,y+16) )
	{
		gameOver(); // Call the game over function when there's an overlap
	}
}
// Function to check if the player is inside the meat's area
int playerInsideMeat(uint16_t x,uint16_t y,uint16_t meatX,uint16_t meatY)
{             
	// Now check for an overlap by checking to see if ANY of the 4 corners of Luffy are within the enemy area
	if (isInside(meatX,meatY,12,16,x,y) || isInside(meatX,meatY,12,16,x+12,y) || isInside(meatX,meatY,12,16,x,y+16) || isInside(meatX,meatY,12,16,x+12,y+16) )
	{
		return 1; // Return 1 to indicate that there is an overlap (player is inside the meat area)
	}

	return 0; // Return 0 to indicate no overlap
}

// Function to display a black screen with specific rectangles filled in a graphical display
void displayBlack(void)
{
	fillRectangle(0,0,128,160,0); // Fill the entire screen with black color
	fillRectangle(40,0,45,179,0); // Fill a vertical rectangle on the left side of the screen to create a border effect
	fillRectangle(0,65,128,20,0); // Fill a horizontal rectangle in the middle of the screen to create a border effect
}

//Function that plays a song when the game is loaded
void playIntroNotes(void)
{
	// Loop through the array of intro notes
	for(int i = 0; i != 10; i++)
	{
		playNote(introNotes[i]); // Play the current note in the sequence
		delay(200); // Introduce a delay between notes (adjustable duration)
	}

	playNote(0); // Play a special note (or silence) to conclude the song
}

//Function that plays a song when the game is loaded
void playThemeSong(int themeSong[],int sizeOfNotes)
{
	static int nextNote = 0;
    
	if (milliseconds >= 500)
        {
            playNote(0);
            nextNote++; // Move onto the next note.
            milliseconds = 0;
        }
        else 
        {
            playNote(themeSong[nextNote]);
        }
        if (nextNote > sizeOfNotes)
        {
            nextNote = 0;
        }
}

void displayLevelCompleted(void)
{
	//Local Variables for logs for any user interaction with the game
   char log[] = "Player has completed level 1";

   for (int i = 0; i < strlen(log); i++)
   {
	 eputchar(log[i]);
	 delay(50);
   }

   eputs("\r\n");

	//Plays a string of notes
	levelCompleteSound();

	// Wait for the right button to be pressed before displaying the level completion message
	while (rightPressed() != 0)
	{
		// Display the level completion message and instructions
		printText("Level Completed",8,10,255,0);
		printText("Right Button", 8, 20, 255, 0);
		printText("To begin", 8, 30, 255, 0);
		printText("Next level!", 8, 40, 255, 0);

		// Display a smiley image on the screen
		//putImage(45,70,32,32,smile,0,0);
	}

	// Delay for a short period to ensure smooth transition
	delay(50);

	// Call the function to proceed to the next level
	levelCompleted();
}

void displayLevel2Completed(void)
{
	//Local Variables for logs for any user interaction with the game
   char log[] = "Player has completed level 2";

   for (int i = 0; i < strlen(log); i++)
   {
	 eputchar(log[i]);
	 delay(50);
   }

   eputs("\r\n");
	
	//Plays a string of notes
	levelCompleteSound();

	// Wait for the right button to be pressed before displaying the level completion message
	while (rightPressed() != 0)
	{
		// Display the level completion message and instructions
		printText("Level 2 Completed",8,10,255,0);
		printText("Right Button", 8, 20, 255, 0);
		printText("To begin", 8, 30, 255, 0);
		printText("Next level!", 8, 40, 255, 0);
		
		// Display a smiley image on the screen
		//putImage(45,70,32,32,smile,0,0);
	}

	// Delay for a short period to ensure smooth transition
	delay(50);

	// Call the function to proceed to the next level
	level2Completed();
}

void displayLevel3Completed(void)
{
	//Local Variables for logs for any user interaction with the game
   char log[] = "Player has completed level 3";

   for (int i = 0; i < strlen(log); i++)
   {
	 eputchar(log[i]);
	 delay(50);
   }

   eputs("\r\n");

	//Plays a string of notes
	levelCompleteSound();

	// Wait for the right button to be pressed before displaying the level completion message
	while (rightPressed() != 0)
	{
		// Display the level completion message and instructions
		printText("Level 3 Completed",8,10,255,0);
		printText("Right Button", 8, 20, 255, 0);
		printText("To begin", 8, 30, 255, 0);
		printText("Next level!", 8, 40, 255, 0);
		
		// Display a smiley image on the screen
		//putImage(45,70,32,32,smile,0,0);
	}

	// Delay for a short period to ensure smooth transition
	delay(50);

	// Call the function to proceed to the next level
	level3Completed();
}

void levelCompleted(void)
{
    //Variable to continue
    int continue_game = 0;

	while (continue_game == 0)
	{
		fillRectangle(0,0,128,160,0);
		fillRectangle(40,0,45,179,0);
		fillRectangle(0,65,128,20,0);

		if (rightPressed() == 0) // right pressed
		{   
			continue_game = 1;   

			while (1)
			{
				printText("Crossy Seas",25,10,255,0);
				putImage(45,45,32,30,logo,0,0);

				delay(1000);

				printText("Level 2",0,130,255,0);
				printText("Loading....",0,150,255,0);

				delay(1000);
				level2();
				delay(1000);
			}
		}
	}
}

void level2Completed(void)
{
	//Variable to continue
	int continue_game = 0;
	
	while (continue_game == 0)
	{
		fillRectangle(0,0,128,160,0);
		fillRectangle(40,0,45,179,0);
		fillRectangle(0,65,128,20,0);
	
		// Check if the right button is pressed
		if (rightPressed() == 0)
		{    
	    	continue_game = 1;    
	   
			// Display the "Crossy Seas" title and logo     
			while (1)
			{
				printText("Crossy Seas",25,10,255,0);
				putImage(45,45,32,30,logo,0,0);
			
				delay(1000);
			
				// Display loading message for Level 3
				printText("Level 3",0,130,255,0);
				printText("Loading....",0,150,255,0);
			
				delay(1000);
				level3(); // Call function to initiate Level 3
				delay(1000);
	    	} 
		}
    }
}

void level3Completed(void)
{
	//Variable to continue
    int continue_game = 0;

	while (continue_game == 0)
	{

		fillRectangle(0,0,128,160,0);
		fillRectangle(40,0,45,179,0);
		fillRectangle(0,65,128,20,0);

		if (rightPressed() == 0) // right pressed
		{   
			continue_game = 1;   

			while (1)
			{
				printText("Crossy Seas",25,10,255,0);
				putImage(45,45,32,30,logo,0,0);

				delay(1000);

				printText("Level 4",0,130,255,0);
				printText("Loading....",0,150,255,0);

				delay(1000);
				level4();
				delay(1000);
			}

		}

	}
}

//Function that displays a screen congradulating the player for completing the game
void gameCompleted(void)
{
	//Local Variables for logs for any user interaction with the game
   char log[] = "Player has completed the Game";

   for (int i = 0; i < strlen(log); i++)
   {
	 eputchar(log[i]);
	 delay(50);
   }

   eputs("\r\n");

   displayBlack();

	while (upPressed() != 0)
	{
		gameCompletedSound();

		printText("Congratulations!",6,10,255,0);
		printText("You completed", 6, 20, 255, 0);
		printText("Crossy Seas", 6, 30, 255, 0);
		printText("By Max & Jennifer", 6, 40, 255, 0);
		putImage(45,75,32,30,logo,0,0);

		printText("Congradulations",0,140,255,0); // Displays "Congradulations" at coordinates (0,140)
		printText("Press up to retry",0,150,255,0); // Displays the text "Press up to retry" at coordinates (0, 150)
	}

	delay(50);

	restart();                       
}

void gameCompletedSound(void)
{
	playNote(G4);
	delay(150);
	playNote(0);
	playNote(C5);
	delay(150);
	playNote(0);
	playNote(E5);
	delay(150);
	playNote(0);
	playNote(G5);
	delay(150);
	playNote(0);
	playNote(C6);
	delay(500);
	playNote(0);
}

void levelCompleteSound(void)
{
	playNote(B4);
	delay(200);
	playNote(0);
	playNote(C4);
	delay(200);
	playNote(0);
	playNote(C6);
	delay(400);
	playNote(0);
}

void level1(void)
{
   delay(1000);

   //Local Variables for logs for any user interaction with the game
   char log[] = "Game has loaded level 1";

   for (int i = 0; i < strlen(log); i++)
   {
	 eputchar(log[i]);
	 delay(50);
   }

   eputs("\r\n");

   // Initialize player coordinates
	x = 55;
	y = 140;

   uint16_t oldx = x; // Store the current x-coordinate of the player
   uint16_t oldy = y; // Store the current y-coordinate of the player

   //Set enemy Y co-ordinates
   enemyY = 65;

   renderGame(); // Render the initial state of the game

   delay(50); // Introduce a delay for smoother rendering

   renderAssets(); // Render game assets such as characters and symbols
   
	//Game Loop
	while(1)
	{	
		if (musicFlag == 0)
		{
			playThemeSong(themeSong,NOTE_SIZE);
		}
		
		hmoved = vmoved = 0; // Flags to track player movement
		hinverted = vinverted = 0; // Flags to track player orientation

		//Enemy Movement
		if (enemyX > 100)
		{
			deltaX = -1; // Move the enemy left if it's beyond x-coordinate 100
		}

		if (enemyX < 1)
		{
			deltaX = 1; // Move the enemy right if it's beyond x-coordinate 1
		}

		fillRectangle(enemyX,enemyY,12,16,RGBToWord(102,51,0)); // Fill the previous enemy position with a color

		enemyX = enemyX + deltaX; // Update the enemy's x-coordinate

		putImage(enemyX,enemyY,12,16,enemy,0,0); // Draw the enemy at its new position

		enemyInsidePlayer(enemyX,enemyY,x,y); // Check if the enemy is overlapping with the player

		//Luffy Movement
		//Deletes the original image off the spawn

		if (rightPressed() == 0 || leftPressed() == 0 || upPressed() == 0 || downPressed() == 0)
		{
			putImage(x,y,12,16,delete,0,0); // Delete the original player image if a movement key is pressed
		}

		// Handle player movement in different directions
		if (rightPressed() == 0)
		{	
			// Move the player right
			// Ensure that the player stays within the game boundaries
			if (x < 110)
			{
				x = x + 1;
				hmoved = 1;
				hinverted=0;
			}						
		}
		if (leftPressed() == 0)
		{			
			// Move the player left
			// Ensure that the player stays within the game boundaries
			if (x > 10)
			{
				x = x - 1;
				hmoved = 1;
				hinverted=1;
			}			
		}
		if ( downPressed() == 0)
		{
			// Move the player down
			// Ensure that the player stays within the game boundaries
			if (y < 140)
			{
				y = y + 1;			
				vmoved = 1;
				vinverted = 0;
			}
		}
		if (upPressed() == 0 )
		{	
			// Move the player up
			// Ensure that the player stays within the game boundaries
			if (y > 16)
			{
				y = y - 1;
				vmoved = 1;
				vinverted = 1;	
			}
		}

		// Similar logic for left, down, and up movements...

		// Redraw the player if there's been movement to reduce flicker
		if ((vmoved) || (hmoved))
		{
			fillRectangle(oldx,oldy,12,16,RGBToWord(102,51,0)); // Fill the previous player position with a color

			oldx = x;
			oldy = y;					

			// Redraw the player image based on movement and orientation
			if (hmoved)
			{
				if (toggle)
					putImage(x,y,12,16,luffy2,hinverted,0);
				else
					putImage(x,y,12,16,luffy3,hinverted,0);
				
				toggle = toggle ^ 1;  // Toggle between two images for animation
			}
			else
			{
				putImage(x,y,12,16,luffy4,0,hinverted);
			}

			playerInsideEnemy(x,y,enemyX,enemyY); // Check if the player is overlapping with the enemy

			if (playerInsideMeat(x,y,meatX,meatY) == 1)
			{
				displayBlack(); // Display a black screen
				delay(50);
				displayLevelCompleted(); // Display a level completed message
				delay(50);	
				levelCompleted(); // Perform actions for completing a level
			}

			if (hitOcean(x,y,12,16) == 1)
			{
				gameOver(); // Displays a game over screen
			}
		}
		delay(50); // Introduce a delay before the next iteration of the game loop
	}
}

// Function to handle the second level of the game
void level2(void)
{
    delay(1000);

	//Local Variables for logs for any user interaction with the game
   char log[] = "Game has loaded level 2";

   for (int i = 0; i < strlen(log); i++)
   {
	 eputchar(log[i]);
	 delay(50);
   }

	// Initialize player coordinates
	x = 55;
	y = 140;

	// Variables for saving previous player position
	uint16_t oldx = x;
	uint16_t oldy = y;

	 // Render the second level environment and assets
	renderLevel2();
	delay(1000);
	renderAssets();
	delay(1000);

	while (1)
	{
	 // Reset movement flags
	 hmoved = vmoved = 0;
	 hinverted = vinverted = 0;

	 //Enemy Movement
	 if (enemyX > 100)
	 {
	   deltaX = -1; // Move the enemy left if it's beyond x-coordinate 100
	 }
	 if (enemy2X > 100)
	 {
	   delta2X = 1; // Move the enemy right if it's beyond x-coordinate 1
	 }
	 if (enemyX < 1)
	 {
	   deltaX = 1; // Move the enemy left if it's beyond x-coordinate 100
	 }
	 if (enemy2X < 1)
	 {
	   delta2X = -1; // Move the enemy right if it's beyond x-coordinate 1
	 }

	 // Draw enemies at their new positions
	 fillRectangle(enemyX,enemyY,12,16,RGBToWord(102,51,0));
	 fillRectangle(enemy2X,enemy2Y,12,16,RGBToWord(102,51,0));
	
	 enemyX = enemyX + deltaX; //Enemy 1 moves right
	 enemy2X = enemy2X - delta2X; //Enemy 2 moves left

	 putImage(enemyX,enemyY,12,16,enemy,0,0);
	 putImage(enemy2X,enemy2Y,12,16,enemy,0,0);

	 // Check if player collides with enemies
	 enemyInsidePlayer(enemyX,enemyY,x,y);
	 enemyInsidePlayer(enemy2X,enemy2Y,x,y);

	 //Luffy Movement
	 //Deletes the original image off the spawn

	 if (rightPressed() == 0 || leftPressed() == 0 || upPressed() == 0 || downPressed() == 0)
	 {
	   putImage(x,y,12,16,delete,0,0);
	 }
	
	// Handle Right Movement
	if (rightPressed() == 0)
	{
	    // Check if within the right boundary
	    if (x < 110)
	    {
	     x = x + 1; // Move right
	     hmoved = 1; // Set horizontal movement flag
	     hinverted=0; // Set horizontal inversion flag
	    }						
	}
	// Handle left Movement
	if (leftPressed() == 0)
	{
	    // Check if within the left boundary
	    if (x > 10)
	    {
	     x = x - 1; // Move right
	     hmoved = 1; // Set horizontal movement flag
	     hinverted=1; // Set horizontal inversion flag
	   }			
	}
	// Handle down Movement
	if ( downPressed() == 0)
	{
	   if (y < 140)
	   {
	     // Check if within the bottom boundary
	     y = y + 1;	// Move down		
	     vmoved = 1; // Set horizontal movement flag
	     vinverted = 0; // Set horizontal inversion flag
	   }
	}
	// Handle up Movement
	if (upPressed() == 0 ) 
	{
	  
	  if (y > 16)
	  {
	    // Check if within the top boundary
	    y = y - 1; // Move up
	    vmoved = 1; // Set horizontal movement flag
	    vinverted = 1; // Set horizontal inversion flag
	  }
	}
	// Redraw player if there has been movement
	if ((vmoved) || (hmoved))
	{
	  // only redraw if there has been some movement (reduces flicker)
	  fillRectangle(oldx,oldy,12,16,RGBToWord(102,51,0));
	
	  oldx = x;
	  oldy = y;					

	  // Draw the player based on the movement direction
	  if (hmoved)
	  {
	    if (toggle)
		putImage(x,y,12,16,luffy2,hinverted,0);
	    else
		putImage(x,y,12,16,luffy3,hinverted,0);
		
	    toggle = toggle ^ 1; // Toggle for animation effect
	  }
	  else
	  {
	    putImage(x,y,12,16,luffy4,0,hinverted);
	  }
	
	   // Check for collisions and perform actions accordingly			
	  if (playerInsideMeat(x,y,meatX,meatY) == 1)
	  {
		// Player collected meat
		displayBlack();
		delay(50);
		displayLevel2Completed();
		delay(50);	
		level2Completed();
	 }
	
	 if (hitOcean(x,y,12,16) == 1)
	  {
	   gameOver(); // Player touched the ocean
	  }
			
	}		
	delay(50);
    }
}

void level3(void)
{
	delay(1000);

	// Initialize player coordinates
	x = 55;
	y = 140;

	//Local Variables for logs for any user interaction with the game
   char log[] = "Game has loaded level 3";

   for (int i = 0; i < strlen(log); i++)
   {
	 eputchar(log[i]);
	 delay(50);
   }

	 // Variables for saving previous player position
	uint16_t oldx = x;
	uint16_t oldy = y;

	// Render the 3rd level environment and assets
	renderLevel3();
	delay(1000);
	renderAssets();
	delay(1000);
	
	while (1)
	{
		// Reset movement flags
		hmoved = vmoved = 0;
		hinverted = vinverted = 0;
		
		//Sets new co-ordinates for the enemy
		enemyY = 40;
		enemy2Y = 80;
		enemy3Y = 120;

		//Enemy Movement
		if (enemyX > 100)
		{
			deltaX = -1; // Move the enemy left if it's beyond x-coordinate 100
		}
		if (enemy2X > 100)
		{
			delta2X = 1; // Move the enemy right if it's beyond x-coordinate 100
		}
		if (enemy3X > 100)
		{
			delta3X = -1; // Move the enemy left if it's beyond x-coordinate 100
		}
		if (enemyX < 1)
		{
			deltaX = 1; // Move the enemy right if it's beyond x-coordinate 1
		}
		if (enemy2X < 1)
		{
			delta2X = -1; // Move the enemy left if it's beyond x-coordinate 1
		}
		if (enemy3X < 1)
		{
			delta3X = 1; // Move the enemy right if it's beyond x-coordinate 100
		}

		// Draw enemies at their new positions
		fillRectangle(enemyX,enemyY,12,16,RGBToWord(102,51,0));
		fillRectangle(enemy2X,enemy2Y,12,16,RGBToWord(102,51,0));
		fillRectangle(enemy3X,enemy3Y,12,16,RGBToWord(102,51,0));

		//Co-ordinates changing 
		enemyX = enemyX + deltaX;
		enemy2X = enemy2X - delta2X;
		enemy3X = enemy3X + delta3X;

		putImage(enemyX,enemyY,12,16,enemy,0,0);
		putImage(enemy2X,enemy2Y,12,16,enemy,0,0);
		putImage(enemy3X,enemy3Y,12,16,enemy,0,0);

		// Check if player collides with enemies
		enemyInsidePlayer(enemyX,enemyY,x,y);
		enemyInsidePlayer(enemy2X,enemy2Y,x,y);
		enemyInsidePlayer(enemy3X,enemy3Y,x,y);


		//Luffy Movement
		//Deletes the original image off the spawn

		if (rightPressed() == 0 || leftPressed() == 0 || upPressed() == 0 || downPressed() == 0)
		{
			putImage(x,y,12,16,delete,0,0);
		}
		

		if (rightPressed() == 0) // right pressed
		{					
			if (x < 110)
			{
				x = x + 1;
				hmoved = 1;
				hinverted=0;
			}						
		}
		
		if (leftPressed() == 0) // left pressed
		{				
			if (x > 10)
			{
				x = x - 1;
				hmoved = 1;
				hinverted=1;
			}			
		}
		
		if ( downPressed() == 0) // down pressed
		{
			if (y < 140)
			{
				y = y + 1;			
				vmoved = 1;
				vinverted = 0;
			}
		}
		
		if (upPressed() == 0 ) // up pressed
		{			
			if (y > 16)
			{
				y = y - 1;
				vmoved = 1;
				vinverted = 1;	
			}
		}
		
		if ((vmoved) || (hmoved))
		{
		// only redraw if there has been some movement (reduces flicker)
		fillRectangle(oldx,oldy,12,16,RGBToWord(102,51,0));
		
		oldx = x;
		oldy = y;					
		
		if (hmoved)
		{
			if (toggle)
				putImage(x,y,12,16,luffy2,hinverted,0);
			else
				putImage(x,y,12,16,luffy3,hinverted,0);
				
			toggle = toggle ^ 1; // Toogles for animation effect
		}
		else
		{
			putImage(x,y,12,16,luffy4,0,hinverted);
		}
					
		if (playerInsideMeat(x,y,meatX,meatY) == 1)
		{
			displayBlack();
			delay(50);
			displayLevel3Completed();
		}
		
		if (hitOcean(x,y,12,16) == 1)
		{
			gameOver();
		}
		
	}		
      delay(50);
    }
}

void level4(void)
{
	delay(1000);

    x = 55;
	y = 140;

	uint16_t oldx = x;
	uint16_t oldy = y;

	renderLevel4();
	delay(1000);
	renderAssets();
	delay(1000);

	while (1)
	{

		hmoved = vmoved = 0;

		hinverted = vinverted = 0;

		//Enemy Movement
		if (enemyX > 100)
		{
			deltaX = -1;
		}

		if (enemy2X > 100)
		{
			delta2X = 1;
		}

		if (enemy3X > 100)
		{
			delta3X = -1;
		}

		if (enemyX < 1)
		{
			deltaX = 1;
		}

		if (enemy2X < 1)
		{
			delta2X = -1;
		}

		if (enemy3X < 1)
		{
			delta3X = 1;
		}

		fillRectangle(enemyX,enemyY,12,16,RGBToWord(102,51,0));
		fillRectangle(enemy2X,enemy2Y,12,16,RGBToWord(102,51,0));
		fillRectangle(enemy3X,enemy3Y,12,16,RGBToWord(102,51,0));
		
		enemyX = enemyX + deltaX;
		enemy2X = enemy2X - delta2X;
		enemy3X = enemy3X + delta3X;

		putImage(enemyX,enemyY,12,16,enemy,0,0);
		putImage(enemy2X,enemy2Y,12,16,enemy,0,0);
		putImage(enemy3X,enemy3Y,12,16,enemy,0,0);
		

		enemyInsidePlayer(enemyX,enemyY,x,y);
		enemyInsidePlayer(enemy2X,enemy2Y,x,y);
		enemyInsidePlayer(enemy3X,enemy3Y,x,y);

		//Luffy Movement
		//Deletes the original image off the spawn

		if (rightPressed() == 0 || leftPressed() == 0 || upPressed() == 0 || downPressed() == 0)
		{
			putImage(x,y,12,16,delete,0,0);
		}
		

		if (rightPressed() == 0) // right pressed
		{					
			if (x < 110)
			{
				x = x + 1;
				hmoved = 1;
				hinverted=0;
			}						
		}
		
		if (leftPressed() == 0) // left pressed
		{				
			if (x > 10)
			{
				x = x - 1;
				hmoved = 1;
				hinverted=1;
			}			
		}
		
		if ( downPressed() == 0) // down pressed
		{
			if (y < 140)
			{
				y = y + 1;			
				vmoved = 1;
				vinverted = 0;
			}
		}
		
		if (upPressed() == 0 ) // up pressed
		{			
			if (y > 16)
			{
				y = y - 1;
				vmoved = 1;
				vinverted = 1;	
			}	
		}
		
		if ((vmoved) || (hmoved))
		{
		// only redraw if there has been some movement (reduces flicker)
		fillRectangle(oldx,oldy,12,16,RGBToWord(102,51,0));
		
		oldx = x;
		oldy = y;					
		
		if (hmoved)
		{
			if (toggle)
				putImage(x,y,12,16,luffy2,hinverted,0);
			else
				putImage(x,y,12,16,luffy3,hinverted,0);
				
			toggle = toggle ^ 1; // Toogles for animation effect
		}
		else
		{
			putImage(x,y,12,16,luffy4,0,hinverted);
		}
					
		if (playerInsideMeat(x,y,meatX,meatY) == 1)
		{
			displayBlack();
			delay(50);
			gameCompleted();
		}
		
		if (hitOcean(x,y,12,16) == 1)
		{
			gameOver();
		}
			
		}		
		
	delay(50);
	}
}

void renderGame()
{
	//Local Variables for logs for any user interaction with the game
    char log[] = "Game has rendered level 1";

    for (int i = 0; i < strlen(log); i++)
    {
	  eputchar(log[i]);
	  delay(50);
    }

    eputs("\r\n");

	// Sets the background of the game to represent the sea
	fillRectangle(0,0,128,160,RGBToWord(51,143,255));

	// Generate waves in the sea
	for (int i = 0; i < 80; i++)
	{
		putImage(waveX,wavesY,4,8,waves,0,0);			
		waveX = waveX + 8;

		for (int j = 0; j < 160; j++)
		{
			putImage(waveX,wavesY,4,8,waves,0,0);
			wavesY = wavesY + 16;
		}
	}

	fishX = rand() % 30;
	fishY = rand() % 50;

	shipX = rand() % 30;
	shipY = rand() % 50;
	
	putImage(20,90,12,16,fish,0,0);
	putImage(8,10,12,16,ship,0,0);

	putImage(25,40,12,16,fish,0,0);
	putImage(5,120,12,16,ship,0,0);
	
	putImage(-150,4,12,16,ship,0,0);
	putImage(-160,40,12,16,ship,0,0);
	putImage(-160,100,12,16,fish,0,0);
	putImage(-150,130,12,16,ship,0,0);

	//Main bridge
	fillRectangle(40,0,45,179,RGBToWord(102,51,0));

	//Side bridge for the enemy
	fillRectangle(0,65,128,20,RGBToWord(102,51,0));
}

void renderLevel2()
{
	//Local Variables for logs for any user interaction with the game
   char log[] = "Game has rendered level 2";

   for (int i = 0; i < strlen(log); i++)
   {
	 eputchar(log[i]);
	 delay(50);
   }

   eputs("\r\n");
   
	// Sets the background of the game to represent the sea
	fillRectangle(0,0,128,160,RGBToWord(51,143,255));

	// Generate waves in the sea
	for (int i = 0; i < 80; i++)
	{
		putImage(waveX,wavesY,4,8,waves,0,0);
		waveX = waveX + 8;

		for (int j = 0; j < 160; j++)
		{
			putImage(waveX,wavesY,4,8,waves,0,0);
			wavesY = wavesY + 16;
		}
	}

	// Place various images representing objects in the game
	putImage(8,10,12,16,ship,0,0);
	putImage(25,40,12,16,fish,0,0);
	putImage(5,130,12,16,ship,0,0);
	putImage(20,85,12,16,fish,0,0);
	putImage(-150,4,12,16,fish,0,0);
	putImage(-160,40,12,16,ship,0,0);
	putImage(-160,140,12,16,ship,0,0);
	putImage(-150,120,12,16,fish,0,0);

	//Main bridge
	fillRectangle(40,0,45,179,RGBToWord(102,51,0));

	// 2 Side bridges for the enemy
	fillRectangle(0,65,128,20,RGBToWord(102,51,0));
	fillRectangle(0,100,128,20,RGBToWord(102,51,0));
}

void renderLevel3()
{
	//Local Variables for logs for any user interaction with the game
    char log[] = "Game has rendered level 3";

	for (int i = 0; i < strlen(log); i++)
	{
		eputchar(log[i]);
		delay(50);
	}

    eputs("\r\n");
   
	// Sets the background of the game to represent the sea
	fillRectangle(0,0,128,160,RGBToWord(51,143,255));

	// Generate waves in the sea
	for (int i = 0; i < 80; i++)
	{
		putImage(waveX,wavesY,4,8,waves,0,0);
		waveX = waveX + 8;

		for (int j = 0; j < 160; j++)
		{
			putImage(waveX,wavesY,4,8,waves,0,0);
			wavesY = wavesY + 8;
		}
	}

	// Place various images representing objects in the game
	putImage(8,10,12,16,ship,0,0);
	putImage(25,20,12,16,fish,0,0);
	putImage(20,100,12,16,fish,0,0);
	putImage(5,140,12,16,ship,0,0);

	putImage(-150,4,12,16,fish,0,0);
	putImage(-160,20,12,16,ship,0,0);
	putImage(-150,100,12,16,ship,0,0);
	putImage(-160,140,12,16,fish,0,0);

	//Main bridge
	fillRectangle(40,0,45,179,RGBToWord(102,51,0));

	// 3 Side bridges for the enemy
	fillRectangle(0,40,128,20,RGBToWord(102,51,0));
	fillRectangle(0,80,128,20,RGBToWord(102,51,0));
	fillRectangle(0,120,128,20,RGBToWord(102,51,0));
}

void renderLevel4()
{
	//Local Variables for logs for any user interaction with the game
	char log[] = "Game has rendered level 4";

	for (int i = 0; i < strlen(log); i++)
	{
		eputchar(log[i]);
		delay(50);
	}

	eputs("\r\n");
   
	// Sets the background of the game to represent the sea
	fillRectangle(0,0,128,160,RGBToWord(51,143,255));

	// Generate waves in the sea
	for (int i = 0; i < 80; i++)
	{
		putImage(waveX,wavesY,4,8,waves,0,0);
		waveX = waveX + 8;

		for (int j = 0; j < 160; j++)
		{
			putImage(waveX,wavesY,4,8,waves,0,0);
			wavesY = wavesY + 16;
		}
	}
	
	// Place various images representing objects in the game
	putImage(8,10,12,16,fish,0,0);
	putImage(25,20,12,16,fish,0,0);
	putImage(20,100,12,16,ship,0,0);
	putImage(5,140,12,16,ship,0,0);

	putImage(-150,4,12,16,ship,0,0);
	putImage(-160,20,12,16,ship,0,0);
	putImage(-150,100,12,16,fish,0,0);
	putImage(-160,140,12,16,fish,0,0);

	//Main bridge
	fillRectangle(40,0,45,179,RGBToWord(102,51,0));

	// 3 Side bridges for the enemy
	fillRectangle(0,40,128,20,RGBToWord(102,51,0));
	fillRectangle(0,80,128,20,RGBToWord(102,51,0));
	fillRectangle(0,120,128,20,RGBToWord(102,51,0));
}

void renderAssets(void)
{
	//Local Variables for logs for any user interaction with the game
    char log[] = "Assets has been rendered";

    for (int i = 0; i < strlen(log); i++)
    {
	  eputchar(log[i]);
	  delay(50);
    }

    eputs("\r\n");

	// Render player character
	putImage(55,140,12,16,luffy1,0,0);

	// Render a collectible asset
	putImage(55,20,12,16,meat,0,0);
}

int hitOcean(uint16_t playerx,uint16_t playery,uint16_t w, uint16_t h)
{
	int rvalue = 0; // Initialize the return value to indicate no collision
	int mazeblock=0; // Loop variable for maze blocks

	// Check collision with top barriers
	for (mazeblock = 0; mazeblock < BLOCK_COUNT_TOP; mazeblock++)
	{
		 // Check each corner of the player rectangle for collision
		if (isInside(barrierX[mazeblock],barrierY[mazeblock],w,h,playerx,playery)==1 ||
			isInside(barrierX[mazeblock],barrierY[mazeblock],w,h,playerx+12,playery)==1 || 
			isInside(barrierX[mazeblock],barrierY[mazeblock],w,h,playerx+12,playery+16)==1 ||
			isInside(barrierX[mazeblock],barrierY[mazeblock],w,h,playerx,playery+16)==1 || 
			isInside(barrier2X[mazeblock],barrier2Y[mazeblock],w,h,playerx,playery)==1 ||
			isInside(barrier2X[mazeblock],barrier2Y[mazeblock],w,h,playerx+12,playery)==1 ||
			isInside(barrier2X[mazeblock],barrier2Y[mazeblock],w,h,playerx+12,playery+16)==1 ||
			isInside(barrier2X[mazeblock],barrier2Y[mazeblock],w,h,playerx,playery+16)==1)
		{
			rvalue = 1; // Collision detected
			break;
		}
	}
	// Check collision with bottom barriers
	for (mazeblock = 0; mazeblock < BLOCK_COUNT_BOTTOM; mazeblock++)
	{
		// Check each corner of the player rectangle for collision
		if (isInside(barrier3X[mazeblock],barrier3Y[mazeblock],w,h,playerx,playery)==1 ||
			isInside(barrier3X[mazeblock],barrier3Y[mazeblock],w,h,playerx+12,playery)==1 ||
			isInside(barrier3X[mazeblock],barrier3Y[mazeblock],w,h,playerx+12,playery+16)==1 ||
			isInside(barrier3X[mazeblock],barrier3Y[mazeblock],w,h,playerx,playery+16)==1 ||
			isInside(barrier4X[mazeblock],barrier4Y[mazeblock],w,h,playerx,playery)==1 ||
			isInside(barrier4X[mazeblock],barrier4Y[mazeblock],w,h,playerx+12,playery)==1 ||
			isInside(barrier4X[mazeblock],barrier4Y[mazeblock],w,h,playerx+12,playery+16)==1 ||
			isInside(barrier4X[mazeblock],barrier4Y[mazeblock],w,h,playerx,playery+16)==1 )
		{
			rvalue = 1; // Collision detected
			break;
		}
	}
	// Check collision with side barriers
	for (mazeblock = 0; mazeblock < BLOCK_COUNT_SIDE; mazeblock++)
	{
		if (isInside(side_barrierX[mazeblock],side_barrierY[mazeblock],w,h,playerx,playery)==1 ||
			isInside(side_barrierX[mazeblock],side_barrierY[mazeblock],w,h,playerx+9,playery)==1 ||
			isInside(side_barrierX[mazeblock],side_barrierX[mazeblock],w,h,playerx+9,playery+12)==1 ||
			isInside(side_barrierX[mazeblock],side_barrierY[mazeblock],w,h,playerx,playery+12)==1 ||
			isInside(side_barrier2X[mazeblock],side_barrier2Y[mazeblock],w,h,playerx,playery)==1 ||
			isInside(side_barrier2X[mazeblock],side_barrier2Y[mazeblock],w,h,playerx+9,playery)==1 ||
			isInside(side_barrier2X[mazeblock],side_barrier2X[mazeblock],w,h,playerx+9,playery+12)==1 ||
			isInside(side_barrier2X[mazeblock],side_barrier2Y[mazeblock],w,h,playerx,playery+12)==1 ||
			isInside(side_barrier3X[mazeblock],side_barrier3Y[mazeblock],w,h,playerx,playery)==1 ||
			isInside(side_barrier3X[mazeblock],side_barrier3Y[mazeblock],w,h,playerx+12,playery)==1 ||
			isInside(side_barrier3X[mazeblock],side_barrier3X[mazeblock],w,h,playerx+12,playery+16)==1 ||
			isInside(side_barrier3X[mazeblock],side_barrier3Y[mazeblock],w,h,playerx,playery+16)==1 || 
			isInside(side_barrier4X[mazeblock],side_barrier4Y[mazeblock],w,h,playerx,playery)==1 || 
			isInside(side_barrier4X[mazeblock],side_barrier4Y[mazeblock],w,h,playerx+12,playery)==1 ||
			isInside(side_barrier4X[mazeblock],side_barrier4X[mazeblock],w,h,playerx+12,playery+16)==1 ||
			isInside(side_barrier4X[mazeblock],side_barrier4Y[mazeblock],w,h,playerx,playery+16)==1)
		{
			rvalue = 1; // Collision detected
			break;
		}
	}

	return rvalue;
}